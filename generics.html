
<!DOCTYPE html>


<html lang="en" data-content_root="./" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>5. Generics &#8212; Beyond Basics: Mastering Advanced Python — a book to learn expert aspects of Python language</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/interactives/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'generics';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Structural Subtyping" href="structural_subtyping.html" />
    <link rel="prev" title="4. Generators" href="generators.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
    
    <img src="_static/logo_noname.svg" class="logo__image only-light" alt="Beyond Basics: Mastering Advanced Python — a book to learn expert aspects of Python language - Home"/>
    <script>document.write(`<img src="_static/logo_noname.svg" class="logo__image only-dark" alt="Beyond Basics: Mastering Advanced Python — a book to learn expert aspects of Python language - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Beyond Basics: Mastering Advanced Python — a book to learn expert aspects of Python language</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="special_attributes.html">1. Special Attributes &amp; Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="context_managers.html">2. Context Managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="iterators.html">3. Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="generators.html">4. Generators</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">5. Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="structural_subtyping.html">6. Structural Subtyping</a></li>
<li class="toctree-l1"><a class="reference internal" href="higher_order_functions.html">7. Higher-order Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="decorators.html">8. Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="metaclasses.html">9. Metaclasses</a></li>
<li class="toctree-l1"><a class="reference internal" href="descriptors.html">10. Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_inspect.html">11. Code Inspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_execution.html">12. Dynamic Code Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="weakref.html">13. Weak References</a></li>
<li class="toctree-l1"><a class="reference internal" href="coroutines_and_concurrency.html">14. Coroutines &amp; Concurrency</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallelism.html">15. Concurrency and Parallelism</a></li>
<li class="toctree-l1"><a class="reference internal" href="literature.html">16. References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/HappyRavenLabs/python-beyond-basics" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/HappyRavenLabs/python-beyond-basics/issues/new?title=Issue%20on%20page%20%2Fgenerics.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/generics.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Generics</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#type-hints">5.1. Type Hints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#type-aliases">5.2. Type Aliases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-generic-types">5.3. What Are Generic Types?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-need-generics">5.3.1. Why Do We Need Generics?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-generic">5.4. Creating a Generic</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upper-bounded-parameter-type">5.5. Upper-Bounded Parameter Type</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#type-constraints">5.6. Type Constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#types-of-variance">5.7. Types of Variance</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variance-in-python-code">5.7.1. Variance in Python Code</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="generics">
<h1><span class="section-number">5. </span>Generics<a class="headerlink" href="#generics" title="Link to this heading">#</a></h1>
<p>At the very beginning, let us follow a clear distinction made in <span id="id1">[<a class="reference internal" href="literature.html#id29" title="Guido van Rossum, Jukka Lehtosalo, and Łukasz Langa. PEP 484 – type hints. Python Enhancement Proposal 484, Python Software Foundation, September 2014. URL: https://peps.python.org/pep-0484/ (visited on 2025-10-28).">van Rossum <em>et al.</em>, 2014</a>]</span> between <strong>a class</strong> and <strong>a type</strong>.</p>
<div class="note admonition">
<p class="admonition-title">A type</p>
<p><strong>A type</strong> is a variable or function annotation, a static attribute used for static type-checking. You cannot create instances of types!</p>
</div>
<div class="note admonition">
<p class="admonition-title">A class</p>
<p><strong>A class</strong> is a kind of factory for creating instances; classes are a runtime concept!</p>
</div>
<div class="important admonition">
<p class="admonition-title">A class is a type</p>
<p><strong>Every</strong> class is also <strong>a type</strong>, but not vice-versa!</p>
</div>
<section id="type-hints">
<h2><span class="section-number">5.1. </span>Type Hints<a class="headerlink" href="#type-hints" title="Link to this heading">#</a></h2>
<p>Let us recall that Python supports type hints as a completely voluntary mechanism. Although Python’s makers claim that they will never be mandatory, type hints are nevertheless an extremely useful concept which (quite easily) enables programmers to avoid potentially catastrophic logical errors.</p>
<p>To make this concrete, let us consider a banking system. Access to money should be granted only to an authorized user, represented by an <code class="docutils literal notranslate"><span class="pre">AuthorizedUser</span></code> class, not just any <code class="docutils literal notranslate"><span class="pre">User</span></code> instance. Remember, Python does not require explicit types; hence, provided no extra validation logic is implemented, a program could accidentally grant access to an unauthorized user, leading to security vulnerabilities.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AuthorizedUser</span><span class="p">(</span><span class="n">User</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auth_token</span> <span class="o">=</span> <span class="n">auth_token</span>

<span class="k">def</span><span class="w"> </span><span class="nf">withdraw_money</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">AuthorizedUser</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># Only authorized users should access this</span>
    <span class="c1"># Without type hints, static type check—another watchdog—will fail</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Withdrawing $</span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="n">regular_user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">)</span>
<span class="n">withdraw_money</span><span class="p">(</span><span class="n">regular_user</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">)</span>  <span class="c1"># Static-check type error!</span>

<span class="c1"># This is correct</span>
<span class="n">authorized_user</span> <span class="o">=</span> <span class="n">AuthorizedUser</span><span class="p">(</span><span class="s2">&quot;Jane&quot;</span><span class="p">,</span> <span class="s2">&quot;token123&quot;</span><span class="p">)</span>
<span class="n">withdraw_money</span><span class="p">(</span><span class="n">authorized_user</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">)</span>  <span class="c1"># OK</span>
</pre></div>
</div>
<p>Thanks to type hints, tools for static code analysis such as <a class="reference external" href="https://github.com/python/mypy">MyPy</a> can capture such errors on demand.</p>
<div class="hint admonition">
<p class="admonition-title">Type hints</p>
<p>In Python, type hints are given after a <code class="docutils literal notranslate"><span class="pre">:</span></code> (colon) symbol just after the name of a variable or function parameter, or after <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> when representing the type returned by a function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># we annotate `age` as a variable containing `int` values</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">eps</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># some logic here</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
</section>
<section id="type-aliases">
<h2><span class="section-number">5.2. </span>Type Aliases<a class="headerlink" href="#type-aliases" title="Link to this heading">#</a></h2>
<p>When needed, we can define aliases for a type, e.g., to make types more compact and reusable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span><span class="nb">type</span> <span class="n">ListOrSet</span> <span class="o">=</span> <span class="nb">list</span> <span class="o">|</span> <span class="nb">set</span>
</span><span class="linenos">2</span>
<span class="linenos">3</span><span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">ListOrSet</span><span class="p">):</span> <span class="c1"># instead of item: list | set</span>
<span class="linenos">4</span>    <span class="c1"># some logic here</span>
</pre></div>
</div>
<p>or code — more meaningful:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span><span class="nb">type</span> <span class="n">Minute</span> <span class="o">=</span> <span class="nb">int</span>
</span><span class="linenos">2</span>
<span class="linenos">3</span><span class="k">def</span><span class="w"> </span><span class="nf">sleep</span><span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="n">Minute</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">4</span>    <span class="c1"># some logic here</span>
<span class="linenos">5</span>    <span class="k">pass</span>
</pre></div>
</div>
<p>In the above example, it is clear that the argument’s integer value represents minutes, not seconds or milliseconds, so the code is clearer and more concise than:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">def</span><span class="w"> </span><span class="nf">sleep</span><span class="p">(</span><span class="n">time_minutes</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">2</span>    <span class="c1"># some logic here</span>
<span class="linenos">3</span>    <span class="k">pass</span>
</pre></div>
</div>
<p>Let us now see another example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">type</span> <span class="n">Minute</span> <span class="o">=</span> <span class="nb">int</span>
<span class="linenos">2</span><span class="nb">type</span> <span class="n">Retry</span> <span class="o">=</span> <span class="nb">int</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="k">def</span><span class="w"> </span><span class="nf">retry</span><span class="p">(</span><span class="n">backoff</span><span class="p">:</span> <span class="n">Minute</span><span class="p">,</span> <span class="n">max_retry</span><span class="p">:</span> <span class="n">Retry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">5</span>    <span class="c1"># some logic here</span>
<span class="linenos">6</span>    <span class="k">pass</span>
</pre></div>
</div>
<p>In the code above, nothing prevents us from running the code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">backoff_time</span><span class="p">:</span> <span class="n">Minute</span> <span class="o">=</span> <span class="mi">10</span>
<span class="linenos">2</span><span class="n">retry_count</span><span class="p">:</span> <span class="n">Retry</span> <span class="o">=</span> <span class="mi">5</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># Accidentally swapping the arguments!</span>
<span class="linenos">5</span><span class="n">retry</span><span class="p">(</span><span class="n">retry_count</span><span class="p">,</span> <span class="n">backoff_time</span><span class="p">)</span>  <span class="c1"># Static type checker won&#39;t complain!</span>
</pre></div>
</div>
<p>As you can see, static type checking alone doesn’t prevent this confusion because both are just <code class="docutils literal notranslate"><span class="pre">int</span></code> aliases. When you need static type-checking to be more conservative, you can define simple subclasses to enforce the right types:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">class</span><span class="w"> </span><span class="nc">Minute</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="k">pass</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="k">class</span><span class="w"> </span><span class="nc">Retry</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
<span class="linenos">5</span>    <span class="k">pass</span>
</pre></div>
</div>
<p>This forces you to create instances explicitly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span><span class="n">backoff_time</span><span class="p">:</span> <span class="n">Minute</span> <span class="o">=</span> <span class="n">Minute</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">2</span><span class="n">retry_count</span><span class="p">:</span> <span class="n">Retry</span> <span class="o">=</span> <span class="n">Retry</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># Now this will fail at static type checking</span>
<span class="linenos">5</span><span class="n">retry</span><span class="p">(</span><span class="n">retry_count</span><span class="p">,</span> <span class="n">backoff_time</span><span class="p">)</span>  <span class="c1"># Type error!</span>
</pre></div>
</div>
<p>Then, running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mypy<span class="w"> </span>our_code.py
</pre></div>
</div>
<p>will, as expected, result in the following errors:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>our_code.py:5: error: Argument 1 to &quot;retry&quot; has incompatible type &quot;Retry&quot;; expected &quot;Minute&quot;  [arg-type]
our_code.py:5: error: Argument 2 to &quot;retry&quot; has incompatible type &quot;Minute&quot;; expected &quot;Retry&quot;  [arg-type]
</pre></div>
</div>
<p>However, this approach employs explicit creation of a brand new class. That is unnecessary and requires extra computation at runtime. Hence, you can define a new type using the <a class="reference external" href="https://docs.python.org/3/library/typing.html#newtype"><code class="docutils literal notranslate"><span class="pre">NewType</span></code></a> helper construct:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">NewType</span>
<span class="linenos">2</span>
<span class="hll"><span class="linenos">3</span><span class="n">Minute</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Minute&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">4</span><span class="n">Retry</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Retry&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Remember, <code class="docutils literal notranslate"><span class="pre">NewType</span></code> <strong>must</strong> take only a name (it should be the same as the variable it is assigned to) and its superclass!</p>
<div class="warning admonition">
<p class="admonition-title">NewType vs Real Classes</p>
<p><code class="docutils literal notranslate"><span class="pre">NewType</span></code> return value is used only for static type checking and cannot be subclassed. If you need inheritance, methods, or runtime behavior, use real class inheritance instead! <code class="docutils literal notranslate"><span class="pre">NewType</span></code> outputs cannot be used in subclassing or runtime checks with <code class="docutils literal notranslate"><span class="pre">isinstance</span></code>!</p>
</div>
</section>
<section id="what-are-generic-types">
<h2><span class="section-number">5.3. </span>What Are Generic Types?<a class="headerlink" href="#what-are-generic-types" title="Link to this heading">#</a></h2>
<p>While type aliases and <a class="reference external" href="https://docs.python.org/3/library/typing.html#newtype"><code class="docutils literal notranslate"><span class="pre">NewType</span></code></a> help us create more meaningful names for existing types, they still work with concrete, fixed types. What if we need a data structure that can work with any type: integers today, strings tomorrow, or custom objects next week (while maintaining type safety)? This is where generic types come into play.</p>
<p>First, let us see how the Cambridge Dictionary defines the adjective <strong>generic</strong> <span id="id2">[<a class="reference internal" href="literature.html#id28" title="Generic. https://dictionary.cambridge.org/dictionary/english/generic, 2025. Cambridge Dictionary (accessed 2025-10-28)."><em>generic</em>, 2025</a>]</span>:</p>
<blockquote>
<div><p><em>generic:</em> shared by, typical of, or relating to a whole group of similar things, rather than to any particular thing</p>
</div></blockquote>
<p>How do we translate that into the language of programmers? In software engineering we most frequently speak about <strong>generic types</strong> or <strong>generic classes</strong>.</p>
<div class="note admonition">
<p class="admonition-title">Generic types</p>
<p><strong>Generic types</strong> are types that are parameterized by other types, e.g., <em>a list of integers</em>, <em>a stack of strings</em>, or <em>a dictionary mapping strings to users</em>!</p>
</div>
<section id="why-do-we-need-generics">
<h3><span class="section-number">5.3.1. </span>Why Do We Need Generics?<a class="headerlink" href="#why-do-we-need-generics" title="Link to this heading">#</a></h3>
<p>Imagine you’re building a data structure like a stack. Without generics, you might write an <code class="docutils literal notranslate"><span class="pre">IntStack</span></code> class dealing with integers, but what if you need a stack of strings? Or floats? You’d have to write <code class="docutils literal notranslate"><span class="pre">StringStack</span></code>, <code class="docutils literal notranslate"><span class="pre">FloatStack</span></code>, etc. This is repetitive and error-prone. Certainly, you can delegate the logic to a base class, but then classes such as <code class="docutils literal notranslate"><span class="pre">StringStack</span></code> or <code class="docutils literal notranslate"><span class="pre">FloatStack</span></code> are just dummy subclasses to satisfy type checks (provided the logic is consistent). Generics solve this problem by allowing you to write <strong>one</strong> stack that works with <strong>any</strong> type, provided they share similar logic!</p>
<div class="note admonition">
<p class="admonition-title">Generics vs Inheritance</p>
<p><strong>Generics</strong> (<code class="docutils literal notranslate"><span class="pre">Stack[int]</span></code>, <code class="docutils literal notranslate"><span class="pre">Stack[str]</span></code>): Same behavior, different data types. Write one class, use it type-safely with many types.<br />
<strong>Inheritance</strong> (<code class="docutils literal notranslate"><span class="pre">Dog</span> <span class="pre">extends</span> <span class="pre">Animal</span></code>): Different behaviors. A <code class="docutils literal notranslate"><span class="pre">Dog</span></code> has specific methods that <code class="docutils literal notranslate"><span class="pre">Animal</span></code> doesn’t.<br />
These are complementary tools—use generics to avoid duplication, use inheritance to specialize behavior!</p>
</div>
</section>
</section>
<section id="creating-a-generic">
<h2><span class="section-number">5.4. </span>Creating a Generic<a class="headerlink" href="#creating-a-generic" title="Link to this heading">#</a></h2>
<p>In Python, generic types are usually (but not necessarily) related to collection classes, e.g., <em>a set of floats</em> or <em>a stack of requests</em>, where we specify what type of objects a collection manages.</p>
<p>Since Python 3.12, where a modern and simpler form of defining generics has been introduced by PEP 695 <span id="id3">[<a class="reference internal" href="literature.html#id30" title="Eric Traut. PEP 695 – type parameter syntax. Python Enhancement Proposal 695, Python Software Foundation, March 2022. URL: https://peps.python.org/pep-0695/ (visited on 2025-11-04).">Traut, 2022</a>]</span>, we define generic classes as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos"> 1</span><span class="k">class</span><span class="w"> </span><span class="nc">Graph</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
</span><span class="linenos"> 2</span>    
<span class="linenos"> 3</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="hll"><span class="linenos"> 4</span>        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="linenos"> 5</span>    
<span class="hll"><span class="linenos"> 6</span>    <span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span class="linenos"> 7</span>        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos"> 8</span>    
<span class="hll"><span class="linenos"> 9</span>    <span class="k">def</span><span class="w"> </span><span class="nf">get_all</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
</span><span class="linenos">10</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
</pre></div>
</div>
<p>and generic functions as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span><span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">[</span><span class="n">T</span><span class="p">](</span><span class="n">arg1</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">arg2</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span class="linenos">2</span>    <span class="c1"># some logic here</span>
<span class="linenos">3</span>    <span class="k">return</span> <span class="n">arg1</span>
</pre></div>
</div>
<p>This mysterious variable <code class="docutils literal notranslate"><span class="pre">T</span></code> in both listings is actually the placeholder for the type the generic class or function is parameterized with. For example, in the code below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>the <code class="docutils literal notranslate"><span class="pre">T</span></code> will be bound to <code class="docutils literal notranslate"><span class="pre">str</span></code> as we passed two string literals: <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;b&quot;</span></code>.</p>
<div class="note admonition">
<p class="admonition-title">Mixed types in generics</p>
<p>Note that we can call <code class="docutils literal notranslate"><span class="pre">join(1,</span> <span class="pre">&quot;b&quot;)</span></code> and <a class="reference external" href="https://github.com/python/mypy">MyPy</a> will not complain. In this case, the placeholder parameter <code class="docutils literal notranslate"><span class="pre">T</span></code> is bound to the <code class="docutils literal notranslate"><span class="pre">object</span></code> type, whose subclasses are both <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code>. That is why the static type checker doesn’t necessarily complain about it. You can check type binding by adding the statement <code class="docutils literal notranslate"><span class="pre">reveal_type(res)</span></code>. Remember, it will not work at runtime and only during static type checking with the <code class="docutils literal notranslate"><span class="pre">mypy</span></code> command.</p>
</div>
<div class="important admonition">
<p class="admonition-title">Type parameter name</p>
<p>The name of the type placeholder need not be <code class="docutils literal notranslate"><span class="pre">T</span></code>. It actually can be any arbitrary valid Python identifier. If your generic class or function takes multiple parameter placeholders, they need to be unique:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">[</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">]:</span>
<span class="linenos">2</span>    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Parameterizing generics</p>
<p>With functions, we cannot explicitly state the type for a generic (the type is inferred automatically) but for classes, we can. In fact, we can initialize our <code class="docutils literal notranslate"><span class="pre">Graph</span></code> class in multiple ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># All of these are valid</span>
<span class="linenos">2</span><span class="n">graph_1</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>  <span class="c1"># Type is inferred</span>
<span class="linenos">3</span><span class="n">graph_2</span><span class="p">:</span> <span class="n">Graph</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>  <span class="c1"># Explicit annotation</span>
<span class="linenos">4</span><span class="n">graph_3</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">[</span><span class="nb">int</span><span class="p">]()</span>  <span class="c1"># Runtime parameterization</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="c1"># Usage</span>
<span class="linenos">7</span><span class="n">graph_2</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># OK</span>
<span class="linenos">8</span><span class="n">graph_2</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>  <span class="c1"># Type checker will complain!</span>
</pre></div>
</div>
</div>
</section>
<section id="upper-bounded-parameter-type">
<h2><span class="section-number">5.5. </span>Upper-Bounded Parameter Type<a class="headerlink" href="#upper-bounded-parameter-type" title="Link to this heading">#</a></h2>
<p>We already know that our generic will work without type-check complaints with any kind of type (even a mixture of <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code>). There are, however, many cases where the type needs to be limited. For example, a generic method should be valid only for <code class="docutils literal notranslate"><span class="pre">str</span></code> and its subclasses. To achieve this, we can specify an <strong>upper bound</strong> for our parameter placeholder by means of type annotation. We simply type-annotate our placeholder type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">class</span><span class="w"> </span><span class="nc">Graph</span><span class="p">[</span><span class="n">T</span><span class="p">:</span> <span class="nb">str</span><span class="p">]:</span>
<span class="linenos">2</span>    <span class="c1"># the rest of the code</span>
</pre></div>
</div>
<p>and it will work in either case:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">class</span><span class="w"> </span><span class="nc">Str2</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="k">pass</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="n">g1</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">[</span><span class="nb">str</span><span class="p">]()</span>
<span class="linenos">5</span><span class="n">g2</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">[</span><span class="n">Str2</span><span class="p">]()</span>
</pre></div>
</div>
</section>
<section id="type-constraints">
<h2><span class="section-number">5.6. </span>Type Constraints<a class="headerlink" href="#type-constraints" title="Link to this heading">#</a></h2>
<p>Besides bounding a generic type placeholder to a particular type (and its subtypes), we can also constrain it to two or more types. By constraining, we mean a type can take only one out of the passed constraint types <span id="id4">[<a class="reference internal" href="literature.html#id29" title="Guido van Rossum, Jukka Lehtosalo, and Łukasz Langa. PEP 484 – type hints. Python Enhancement Proposal 484, Python Software Foundation, September 2014. URL: https://peps.python.org/pep-0484/ (visited on 2025-10-28).">van Rossum <em>et al.</em>, 2014</a>]</span>. We specify constraints as a tuple of types:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">class</span><span class="w"> </span><span class="nc">Graph</span><span class="p">[</span><span class="n">T</span><span class="p">:</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">)]:</span>
<span class="linenos">2</span>    <span class="c1"># the rest of the code</span>
</pre></div>
</div>
<div class="important admonition">
<p class="admonition-title">Upper bound or constraints</p>
<p>You cannot define both: constraints and an upper bound!</p>
</div>
<p>Remember, you need to specify no fewer than <strong>two</strong> constraints!</p>
</section>
<section id="types-of-variance">
<h2><span class="section-number">5.7. </span>Types of Variance<a class="headerlink" href="#types-of-variance" title="Link to this heading">#</a></h2>
<p>Now that we understand generics, let’s dive into a somewhat advanced aspect: <strong>variance</strong>. The term <strong>variance</strong> might sound confusing, as it’s usually associated with the statistical measure of data spread. However, in Python’s type system, as clearly explained in PEP 483 <span id="id5">[<a class="reference internal" href="literature.html#id27" title="Guido van Rossum and Ivan Levkivskyi. PEP 483 – the theory of type hints. Python Enhancement Proposal 483, Python Software Foundation, December 2014. URL: https://peps.python.org/pep-0483/ (visited on 2025-10-23).">van Rossum and Levkivskyi, 2014</a>]</span>, there are three types of variance. In general, types can be:</p>
<ol class="arabic simple">
<li><p><strong>Covariant</strong></p></li>
<li><p><strong>Contravariant</strong></p></li>
<li><p><strong>Invariant</strong></p></li>
</ol>
<p>Sounds mysterious? Let us see some real-world examples, quite far apart from the software development world:</p>
<div class="pst-scrollable-table-container"><table class="table" id="variance-real-life">
<caption><span class="caption-number">Table 5.1 </span><span class="caption-text">Real-Life Analogies for Variance in Python</span><a class="headerlink" href="#variance-real-life" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Type of Variance</strong></p></th>
<th class="head"><p><strong>Plain Explanation</strong></p></th>
<th class="head"><p><strong>Real-Life Analogy</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Covariance</strong></p></td>
<td><p>You can <strong>use something more specific</strong> where something more general is expected.</p></td>
<td><p>🐶 <strong>Example:</strong> A <strong>dog</strong> is an <strong>animal</strong> beyond any doubt!<br />
If a vet clinic says, “We treat all animals,” you can bring your <strong>dog</strong>, that’s perfectly fine.<br />
The clinic expects an <em>animal</em> (general), and you provided a <em>dog</em> (specific).<br />
→ That’s <strong>covariance</strong> in action.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Contravariance</strong></p></td>
<td><p>You can <strong>accept something more general</strong> where something more specific is expected.</p></td>
<td><p>👩‍🏫 <strong>Example:</strong> Imagine a <strong>teacher</strong> who can teach <strong>any student</strong>, regardless of age or subject.<br />
If a school says, “We need a <strong>math teacher for high school students</strong>,” sending this general <strong>teacher</strong> still works, they can handle those students too. The teacher can <em>accept</em> a wider variety of students than what was specifically requested.<br />
→ That’s <strong>contravariance</strong> — accepting something broader.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Invariance</strong></p></td>
<td><p>Only an <strong>exact type match</strong> works, no substitutions allowed.</p></td>
<td><p>🐕 <strong>Example:</strong> A <strong>dog bowl</strong> is made <strong>only for dogs</strong>.<br />
You can’t use it for cats or generic animals, it’s a strict fit.<br />
Even though a dog <em>is</em> an animal, the bowl says “dog only.”</p></td>
</tr>
</tbody>
</table>
</div>
<section id="variance-in-python-code">
<h3><span class="section-number">5.7.1. </span>Variance in Python Code<a class="headerlink" href="#variance-in-python-code" title="Link to this heading">#</a></h3>
<p>For Python generics, starting from Python 3.12, parameter type variance (e.g., <code class="docutils literal notranslate"><span class="pre">T</span></code> in our <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Graph[T]:</span></code> definition) is inferred automatically, unless specified explicitly.</p>
<div class="important admonition">
<p class="admonition-title">Default variance type</p>
<p>The default type of variance in Python generics is <strong>invariant</strong>, meaning <strong>exact match</strong> is required. Use <code class="docutils literal notranslate"><span class="pre">covariant=True</span></code> for immutable containers (read-only) and <code class="docutils literal notranslate"><span class="pre">contravariant=True</span></code> for consumer types (write-only/callable parameters).</p>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="generators.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">4. </span>Generators</p>
      </div>
    </a>
    <a class="right-next"
       href="structural_subtyping.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Structural Subtyping</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#type-hints">5.1. Type Hints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#type-aliases">5.2. Type Aliases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-generic-types">5.3. What Are Generic Types?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-need-generics">5.3.1. Why Do We Need Generics?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-generic">5.4. Creating a Generic</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upper-bounded-parameter-type">5.5. Upper-Bounded Parameter Type</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#type-constraints">5.6. Type Constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#types-of-variance">5.7. Types of Variance</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variance-in-python-code">5.7.1. Variance in Python Code</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jakub Walczak, PhD
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>